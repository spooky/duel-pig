{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\src\\Setup.svelte",
    "..\\src\\Shuffle.svelte",
    "..\\src\\Items.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n    import { createEventDispatcher } from 'svelte';\r\n    import { id, setOpts } from './utils.js';\r\n\r\n    export let sid = null;\r\n\r\n    const nickKey = 'nick', boKey = 'bo';\r\n    const dispatch = createEventDispatcher();\r\n\r\n    let nick = localStorage.getItem(nickKey);\r\n    let bo = +localStorage.getItem(boKey) || 3;\r\n\r\n    function onSubmit() {\r\n        localStorage.setItem(nickKey,  nick);\r\n        localStorage.setItem(boKey, bo);\r\n\r\n        const args = { bo, sid: sid || id() };\r\n        setOpts(args);\r\n        dispatch('next', args)\r\n\r\n        return false;\r\n    }\r\n</script>\r\n\r\n<style>\r\n    ::placeholder { color: #666; }\r\n    input,\r\n    select,\r\n    button {\r\n        font-size: x-large;\r\n        height: 2.3em;\r\n        vertical-align: middle;\r\n        display: inline-block;\r\n        border: 1px solid #999;\r\n        color: #fff;\r\n        border-radius: 0;\r\n        margin-bottom: 0;\r\n        background-color: #000;\r\n        margin-bottom: .3em;\r\n    }\r\n    input { width: 12em; }\r\n    button { width: 4em; }\r\n    button:hover { background: #222; }\r\n    button:active { background: #333; }\r\n\r\n    .deck {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        height: 100vh;\r\n        background: rgba(0,0,0,0.6);\r\n    }\r\n\r\n    .options {\r\n        text-align: center;\r\n    }\r\n\r\n    @media only screen and (max-width: 580px) {\r\n        input,\r\n        select,\r\n        button {\r\n            width: 90%;\r\n            min-width: 250px;\r\n        }\r\n    }\r\n</style>\r\n\r\n<div class=\"deck\">\r\n    <form class=\"options\" on:submit|preventDefault=\"{onSubmit}\">\r\n        <input type=\"text\" name=\"nick\" bind:value=\"{nick}\" placeholder=\"nick\" />\r\n        {#if !sid}\r\n        <select bind:value={bo}>\r\n            {#each [3, 5] as v}\r\n            <option value=\"{v}\">Best of {v}</option>\r\n            {/each}\r\n        </select>\r\n        {/if}\r\n        <button type=\"submit\">Go</button>\r\n    </form>\r\n</div>\r\n",
    "<script>\r\n    import { onMount, onDestroy } from 'svelte';\r\n    import Items from './Items.svelte';\r\n    import labels from './labels.js';\r\n    import { establishConnection, post, uid } from './utils.js';\r\n    import { states, actions, machine } from './machine.js';\r\n    import { db } from './stores.js'\r\n\r\n    export let bo, sid, sender = localStorage.getItem('nick');\r\n\r\n    const l = {...labels, 'us': sender};\r\n\r\n    let m, unsubscribe = () => {}, arrangement = {}, connected = false;\r\n    let parties = ['us', 'them'], maps = [], champs = [];\r\n    $: mapsDisabled = arrangement.state !== states.MAPS && arrangement.state !== states.DONE || arrangement.by == 'them';\r\n    $: champsDisabled = arrangement.state !== states.CHAMPS && arrangement.state !== states.DONE || arrangement.by == 'them';\r\n\r\n    onMount(run);\r\n    onDestroy(unsubscribe);\r\n\r\n    function onClick(data) {\r\n        next(data, () => post('messages', { sender, data, sid }));\r\n    }\r\n\r\n    function next(data, send = null) {\r\n        if(arrangement.maps[data] || arrangement.champs[data]) return;\r\n\r\n        if (send) send();\r\n\r\n        arrangement = m.next(data).value || arrangement;\r\n\r\n        if (arrangement.state === states.CHAMPS)\r\n            maps = _whenDone(maps, arrangement.maps);\r\n\r\n        if (arrangement.state === states.DONE)\r\n            champs = _whenDone(champs, arrangement.champs);\r\n    }\r\n\r\n    function run() {\r\n        establishConnection({ sender, sid }, onJoin, onMsg);\r\n    }\r\n\r\n    function onJoin(msg) {\r\n        // console.log('on join', msg);\r\n        const toss = msg.toss == uid({ sender, sid }) ? 0 : 1;\r\n        start(toss);\r\n\r\n        connected = true;\r\n    }\r\n\r\n    function onMsg(msg) {\r\n        // console.log('on msg', msg);\r\n        if (msg.sender !== sender) {\r\n            next(msg.data);\r\n            l.them = msg.sender;\r\n        }\r\n    }\r\n\r\n    function start(toss) {\r\n        unsubscribe();\r\n\r\n        unsubscribe = db.subscribe(v => {\r\n            if (!v) return;\r\n\r\n            maps = v.maps;\r\n            champs = v.champs;\r\n\r\n            m = machine(parties, bo, maps, champs, toss);\r\n            arrangement = m.next().value;\r\n        });\r\n    }\r\n\r\n    function _(name) { return  l[name] || name || ''; }\r\n    function _whenDone(items, lookop) { return items.filter(x => _filter(lookop, x)).sort((l, r) => _order(lookop, l, r)); }\r\n    function _filter(items, item) { return items[item] && items[item].action === actions.PICK; }\r\n    function _order(items, a, b) { return (items[a] || {order:100}).order - (items[b] || {order: 100}).order; }\r\n</script>\r\n\r\n<style>\r\n    header {\r\n        padding: .5em;\r\n        text-align: center;\r\n        font-size: x-large;\r\n        color: #fff;\r\n        box-shadow: 0 0 10px 0px rgba(0, 0, 0, .5);\r\n        display: flex;\r\n        justify-content: center;\r\n    }\r\n\r\n    .deck {\r\n        margin: 0 auto;\r\n        padding-bottom: 1em;\r\n        max-width: 1080px;\r\n    }\r\n\r\n    .hints { flex: 1; }\r\n</style>\r\n\r\n{#if connected}\r\n<header>\r\n    <span class=\"hints\">{_(arrangement.by + '-' + arrangement.action + '-' + arrangement.state)}</span>\r\n</header>\r\n<div class=\"deck\">\r\n    <Items cls=\"{arrangement.state} {arrangement.action}\" labels={l} items={maps} arrangement={arrangement.maps} disabled={mapsDisabled} img=\"maps\" on:click={e => onClick(e.detail)} />\r\n    <Items cls=\"{arrangement.state} {arrangement.action}\" labels={l} items={champs} arrangement={arrangement.champs} disabled={champsDisabled} img=\"champs\" on:click={e => onClick(e.detail)} />\r\n</div>\r\n{:else}\r\n<div class=\"deck-centered\">\r\n    <h1>Connecting...</h1>\r\n</div>\r\n{/if}\r\n",
    "<script>\r\n    import { createEventDispatcher } from 'svelte';\r\n\r\n    export let items;\r\n    export let arrangement;\r\n    export let img;\r\n    export let disabled;\r\n    export let cls;\r\n    export let labels;\r\n\r\n    const dispatch = createEventDispatcher();\r\n    function _(name) { return  labels[name] || name || ''; }\r\n</script>\r\n\r\n<style>\r\n    section { margin-top: 1em; }\r\n\r\n    ul {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content: center;\r\n    }\r\n\r\n    li {\r\n        list-style-type: none;\r\n        display: flex;\r\n        margin-right: .3em;\r\n        margin-bottom: .3em;\r\n    }\r\n\r\n    ul, li {\r\n        margin: 0;\r\n        padding: 0;\r\n    }\r\n\r\n    span {\r\n        display: inline-block;\r\n        margin-right: .3em;\r\n    }\r\n\r\n    .us { background: royalblue; }\r\n    .them { background: red; }\r\n\r\n    .tile {\r\n        position: relative;\r\n        padding: 1px;\r\n        margin: 2px;\r\n        background: #666;\r\n        border: 0;\r\n        box-shadow: 0 0 10px 0px rgba(0, 0, 0, .5);\r\n        width: 9em;\r\n        min-height: 80px;\r\n    }\r\n    .tile[disabled] {\r\n        opacity: .6;\r\n        cursor: default;\r\n    }\r\n    .tile img {\r\n        width: 100%;\r\n        display: block;\r\n    }\r\n\r\n    .tile .action,\r\n    .tile .party,\r\n    .tile .overlay {\r\n        padding: 0;\r\n        margin: 0;\r\n        position: absolute;\r\n        color: #fff;\r\n        background: none;\r\n        font-size: x-large;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n    }\r\n\r\n    .ban .tile:hover .overlay,\r\n    .tile .action.ban {\r\n        background: url('img/ban.svg') #0008 no-repeat 50% 50%;\r\n        background-size: 50%;\r\n    }\r\n    .pick .tile:hover .overlay {\r\n        background: #fff5;\r\n    }\r\n\r\n    .ban .tile[disabled]:hover .overlay { background: none; }\r\n    /*.done ul { justify-content: space-around; }*/\r\n\r\n    .tile .party.us { background: #4169E155; }\r\n    .tile .party.them { background: #f005; }\r\n\r\n    @media only screen and (min-width: 1080px) {\r\n        .tile {\r\n            width: 11em;\r\n            min-height: 100px;\r\n        }\r\n    }\r\n</style>\r\n\r\n<div class={cls}>\r\n    <section>\r\n        <ul>\r\n        {#each items as item}\r\n            <li>\r\n                <button class=\"tile\" on:click={e => dispatch('click', item)} {disabled} title=\"{_(item)}\">\r\n                {#if arrangement[item]}\r\n                    <span class=\"party {arrangement[item].by}\">{_(arrangement[item].by)}</span>\r\n                    <span class=\"action {arrangement[item].action}\"></span>\r\n                {/if}\r\n                <img src=\"img/{img}/{item}.jpg\" alt=\"{item}\" />\r\n                <span class=\"overlay\"></span>\r\n                </button>\r\n            </li>\r\n        {/each}\r\n        </ul>\r\n    </section>\r\n</div>"
  ],
  "names": [],
  "mappings": "AAyBI,aAAa,AAAC,CAAC,AAAC,KAAK,CAAE,IAAI,AAAE,CAAC,AAC9B,oBAAK,CACL,qBAAM,CACN,MAAM,eAAC,CAAC,AACJ,SAAS,CAAE,OAAO,CAClB,MAAM,CAAE,KAAK,CACb,cAAc,CAAE,MAAM,CACtB,OAAO,CAAE,YAAY,CACrB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CACtB,KAAK,CAAE,IAAI,CACX,aAAa,CAAE,CAAC,CAChB,aAAa,CAAE,CAAC,CAChB,gBAAgB,CAAE,IAAI,CACtB,aAAa,CAAE,IAAI,AACvB,CAAC,AACD,KAAK,eAAC,CAAC,AAAC,KAAK,CAAE,IAAI,AAAE,CAAC,AACtB,MAAM,eAAC,CAAC,AAAC,KAAK,CAAE,GAAG,AAAE,CAAC,AACtB,qBAAM,MAAM,AAAC,CAAC,AAAC,UAAU,CAAE,IAAI,AAAE,CAAC,AAClC,qBAAM,OAAO,AAAC,CAAC,AAAC,UAAU,CAAE,IAAI,AAAE,CAAC,AAEnC,KAAK,eAAC,CAAC,AACH,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,KAAK,CACb,UAAU,CAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAC/B,CAAC,AAED,QAAQ,eAAC,CAAC,AACN,UAAU,CAAE,MAAM,AACtB,CAAC,AAED,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACvC,oBAAK,CACL,qBAAM,CACN,MAAM,eAAC,CAAC,AACJ,KAAK,CAAE,GAAG,CACV,SAAS,CAAE,KAAK,AACpB,CAAC,AACL,CAAC;ACcD,MAAM,cAAC,CAAC,AACJ,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,OAAO,CAClB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAC1C,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,AAC3B,CAAC,AAED,KAAK,cAAC,CAAC,AACH,MAAM,CAAE,CAAC,CAAC,IAAI,CACd,cAAc,CAAE,GAAG,CACnB,SAAS,CAAE,MAAM,AACrB,CAAC,AAED,MAAM,cAAC,CAAC,AAAC,IAAI,CAAE,CAAC,AAAE,CAAC;AChFnB,OAAO,eAAC,CAAC,AAAC,UAAU,CAAE,GAAG,AAAE,CAAC,AAE5B,EAAE,eAAC,CAAC,AACA,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,IAAI,CACf,eAAe,CAAE,MAAM,AAC3B,CAAC,AAED,EAAE,eAAC,CAAC,AACA,eAAe,CAAE,IAAI,CACrB,OAAO,CAAE,IAAI,CACb,YAAY,CAAE,IAAI,CAClB,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,iBAAE,CAAE,EAAE,eAAC,CAAC,AACJ,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,AACd,CAAC,AAED,IAAI,eAAC,CAAC,AACF,OAAO,CAAE,YAAY,CACrB,YAAY,CAAE,IAAI,AACtB,CAAC,AAED,GAAG,eAAC,CAAC,AAAC,UAAU,CAAE,SAAS,AAAE,CAAC,AAC9B,KAAK,eAAC,CAAC,AAAC,UAAU,CAAE,GAAG,AAAE,CAAC,AAE1B,KAAK,eAAC,CAAC,AACH,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,GAAG,CACZ,MAAM,CAAE,GAAG,CACX,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,CAAC,CACT,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAC1C,KAAK,CAAE,GAAG,CACV,UAAU,CAAE,IAAI,AACpB,CAAC,AACD,KAAK,CAAC,QAAQ,CAAC,eAAC,CAAC,AACb,OAAO,CAAE,EAAE,CACX,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,oBAAK,CAAC,GAAG,eAAC,CAAC,AACP,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,KAAK,AAClB,CAAC,AAED,oBAAK,CAAC,sBAAO,CACb,oBAAK,CAAC,qBAAM,CACZ,oBAAK,CAAC,QAAQ,eAAC,CAAC,AACZ,OAAO,CAAE,CAAC,CACV,MAAM,CAAE,CAAC,CACT,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,CAChB,SAAS,CAAE,OAAO,CAClB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,CAAC,AACb,CAAC,AAED,mBAAI,CAAC,KAAK,MAAM,CAAC,uBAAQ,CACzB,oBAAK,CAAC,OAAO,IAAI,eAAC,CAAC,AACf,UAAU,CAAE,IAAI,aAAa,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CACtD,eAAe,CAAE,GAAG,AACxB,CAAC,AACD,oBAAK,CAAC,KAAK,MAAM,CAAC,QAAQ,eAAC,CAAC,AACxB,UAAU,CAAE,KAAK,AACrB,CAAC,AAED,mBAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,eAAC,CAAC,AAAC,UAAU,CAAE,IAAI,AAAE,CAAC,AAGzD,oBAAK,CAAC,MAAM,GAAG,eAAC,CAAC,AAAC,UAAU,CAAE,SAAS,AAAE,CAAC,AAC1C,oBAAK,CAAC,MAAM,KAAK,eAAC,CAAC,AAAC,UAAU,CAAE,KAAK,AAAE,CAAC,AAExC,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,MAAM,CAAC,AAAC,CAAC,AACxC,KAAK,eAAC,CAAC,AACH,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,KAAK,AACrB,CAAC,AACL,CAAC"
}