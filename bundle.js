var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function r(){return Object.create(null)}function o(e){e.forEach(n)}function i(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function l(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function h(){return f(" ")}function g(){return f("")}function d(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function v(e,t){t=""+t,e.data!==t&&(e.data=t)}function m(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}let b;function y(e){b=e}function w(){if(!b)throw new Error("Function called outside component initialization");return b}function S(){const e=b;return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach(t=>{t.call(e,o)})}}}const T=[],k=Promise.resolve();let C=!1;const L=[],E=[],_=[];function P(e){E.push(e)}function x(){const e=new Set;do{for(;T.length;){const e=T.shift();y(e),H(e.$$)}for(;L.length;)L.shift()();for(;E.length;){const t=E.pop();e.has(t)||(t(),e.add(t))}}while(T.length);for(;_.length;)_.pop()();C=!1}function H(e){e.fragment&&(e.update(e.dirty),o(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(P))}let I;function A(){I={remaining:0,callbacks:[]}}function O(){I.remaining||o(I.callbacks)}function M(e){I.callbacks.push(e)}function $(e,t,r){const{fragment:s,on_mount:a,on_destroy:c,after_render:u}=e.$$;s.m(t,r),P(()=>{const t=a.map(n).filter(i);c?c.push(...t):o(t),e.$$.on_mount=[]}),u.forEach(P)}function j(e,t){e.$$.dirty||(T.push(e),C||(C=!0,k.then(x)),e.$$.dirty=r()),e.$$.dirty[t]=!0}function N(t,n,i,s,a,c){const u=b;y(t);const l=n.props||{},p=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:r(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:null};let f=!1;var h;p.ctx=i?i(t,l,(e,n)=>{p.ctx&&a(p.ctx[e],p.ctx[e]=n)&&(p.bound[e]&&p.bound[e](n),f&&j(t,e))}):l,p.update(),f=!0,o(p.before_render),p.fragment=s(p.ctx),n.target&&(n.hydrate?p.fragment.l((h=n.target,Array.from(h.childNodes))):p.fragment.c(),n.intro&&t.$$.fragment.i&&t.$$.fragment.i(),$(t,n.target,n.anchor),x()),y(u)}class F{$destroy(){var t,n;n=!0,(t=this).$$&&(o(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function R(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var D,q,U=(function(e,t){var n;window,n=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n.r(t);n(1);var r=n(3);n.d(t,"VERSION",function(){return r.VERSION}),n.d(t,"AbortError",function(){return r.AbortError}),n.d(t,"HttpError",function(){return r.HttpError}),n.d(t,"TimeoutError",function(){return r.TimeoutError}),n.d(t,"HttpClient",function(){return r.HttpClient}),n.d(t,"HttpResponse",function(){return r.HttpResponse}),n.d(t,"DefaultHttpClient",function(){return r.DefaultHttpClient}),n.d(t,"HubConnection",function(){return r.HubConnection}),n.d(t,"HubConnectionState",function(){return r.HubConnectionState}),n.d(t,"HubConnectionBuilder",function(){return r.HubConnectionBuilder}),n.d(t,"MessageType",function(){return r.MessageType}),n.d(t,"LogLevel",function(){return r.LogLevel}),n.d(t,"HttpTransportType",function(){return r.HttpTransportType}),n.d(t,"TransferFormat",function(){return r.TransferFormat}),n.d(t,"NullLogger",function(){return r.NullLogger}),n.d(t,"JsonHubProtocol",function(){return r.JsonHubProtocol}),Uint8Array.prototype.indexOf||Object.defineProperty(Uint8Array.prototype,"indexOf",{value:Array.prototype.indexOf,writable:!0}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice,writable:!0}),Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach,writable:!0})},function(e,t,n){(function(t){var r;r=function(){function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,s=void 0,a=function(e,t){g[o]=e,g[o+1]=t,2===(o+=2)&&(s?s(d):w())},c="undefined"!=typeof window?window:void 0,u=c||{},l=u.MutationObserver||u.WebKitMutationObserver,p="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(d,1)}}var g=new Array(1e3);function d(){for(var e=0;e<o;e+=2){(0,g[e])(g[e+1]),g[e]=void 0,g[e+1]=void 0}o=0}var v,m,b,y,w=void 0;function S(e,t){var n=this,r=new this.constructor(C);void 0===r[k]&&q(r);var o=n._state;if(o){var i=arguments[o-1];a(function(){return R(o,r,i,n._result)})}else $(n,r,e,t);return r}function T(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(C);return I(t,e),t}p?w=function(){return process.nextTick(d)}:l?(m=0,b=new l(d),y=document.createTextNode(""),b.observe(y,{characterData:!0}),w=function(){y.data=m=++m%2}):f?((v=new MessageChannel).port1.onmessage=d,w=function(){return v.port2.postMessage(0)}):w=void 0===c?function(){try{var e=n(!function(){var e=new Error("Cannot find module 'vertx'");throw e.code="MODULE_NOT_FOUND",e}());return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(d)}:h()}catch(e){return h()}}():h();var k=Math.random().toString(36).substring(16);function C(){}var L=void 0,E=1,_=2,P=new N;function x(e){try{return e.then}catch(e){return P.error=e,P}}function H(t,n,r){n.constructor===t.constructor&&r===S&&n.constructor.resolve===T?function(e,t){t._state===E?O(e,t._result):t._state===_?M(e,t._result):$(t,void 0,function(t){return I(e,t)},function(t){return M(e,t)})}(t,n):r===P?(M(t,P.error),P.error=null):void 0===r?O(t,n):e(r)?function(e,t,n){a(function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?I(e,n):O(e,n))},function(t){r||(r=!0,M(e,t))},e._label);!r&&o&&(r=!0,M(e,o))},e)}(t,n,r):O(t,n)}function I(e,t){var n,r;e===t?M(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?O(e,t):H(e,t,x(t)))}function A(e){e._onerror&&e._onerror(e._result),j(e)}function O(e,t){e._state===L&&(e._result=t,e._state=E,0!==e._subscribers.length&&a(j,e))}function M(e,t){e._state===L&&(e._state=_,e._result=t,a(A,e))}function $(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+E]=n,o[i+_]=r,0===i&&e._state&&a(j,e)}function j(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?R(n,r,o,i):o(i);e._subscribers.length=0}}function N(){this.error=null}var F=new N;function R(t,n,r,o){var i=e(r),s=void 0,a=void 0,c=void 0,u=void 0;if(i){if((s=function(e,t){try{return e(t)}catch(e){return F.error=e,F}}(r,o))===F?(u=!0,a=s.error,s.error=null):c=!0,n===s)return void M(n,new TypeError("A promises callback cannot return that same promise."))}else s=o,c=!0;n._state!==L||(i&&c?I(n,s):u?M(n,a):t===E?O(n,s):t===_&&M(n,s))}var D=0;function q(e){e[k]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var U=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(C),this.promise[k]||q(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&O(this.promise,this._result))):M(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===L&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===T){var o=x(e);if(o===S&&e._state!==L)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===B){var i=new n(C);H(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===L&&(this._remaining--,e===_?M(r,n):this._result[t]=n),0===this._remaining&&O(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;$(e,void 0,function(e){return n._settledAt(E,t,e)},function(e){return n._settledAt(_,t,e)})},e}(),B=function(){function e(t){this[k]=D++,this._result=this._state=void 0,this._subscribers=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){I(e,t)},function(t){M(e,t)})}catch(t){M(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},e}();return B.prototype.then=S,B.all=function(e){return new U(this,e).promise},B.race=function(e){var t=this;return r(e)?new t(function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},B.resolve=T,B.reject=function(e){var t=new this(C);return M(t,e),t},B._setScheduler=function(e){s=e},B._setAsap=function(e){a=e},B._asap=a,B.polyfill=function(){var e=void 0;if(void 0!==t)e=t;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}e.Promise=B},B.Promise=B,B.polyfill(),B},e.exports=r()}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){n.r(t),n.d(t,"VERSION",function(){return h});var r=n(4);n.d(t,"AbortError",function(){return r.AbortError}),n.d(t,"HttpError",function(){return r.HttpError}),n.d(t,"TimeoutError",function(){return r.TimeoutError});var o=n(5);n.d(t,"HttpClient",function(){return o.HttpClient}),n.d(t,"HttpResponse",function(){return o.HttpResponse});var i=n(6);n.d(t,"DefaultHttpClient",function(){return i.DefaultHttpClient});var s=n(10);n.d(t,"HubConnection",function(){return s.HubConnection}),n.d(t,"HubConnectionState",function(){return s.HubConnectionState});var a=n(16);n.d(t,"HubConnectionBuilder",function(){return a.HubConnectionBuilder});var c=n(15);n.d(t,"MessageType",function(){return c.MessageType});var u=n(9);n.d(t,"LogLevel",function(){return u.LogLevel});var l=n(18);n.d(t,"HttpTransportType",function(){return l.HttpTransportType}),n.d(t,"TransferFormat",function(){return l.TransferFormat});var p=n(14);n.d(t,"NullLogger",function(){return p.NullLogger});var f=n(23);n.d(t,"JsonHubProtocol",function(){return f.JsonHubProtocol});var h="1.1.4"},function(e,t,n){n.r(t),n.d(t,"HttpError",function(){return i}),n.d(t,"TimeoutError",function(){return s}),n.d(t,"AbortError",function(){return a});var r,o=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(t,n){var r=this,o=this.constructor.prototype;return(r=e.call(this,t)||this).statusCode=n,r.__proto__=o,r}return o(t,e),t}(Error),s=function(e){function t(t){void 0===t&&(t="A timeout occurred.");var n=this,r=this.constructor.prototype;return(n=e.call(this,t)||this).__proto__=r,n}return o(t,e),t}(Error),a=function(e){function t(t){void 0===t&&(t="An abort occurred.");var n=this,r=this.constructor.prototype;return(n=e.call(this,t)||this).__proto__=r,n}return o(t,e),t}(Error)},function(e,t,n){n.r(t),n.d(t,"HttpResponse",function(){return o}),n.d(t,"HttpClient",function(){return i});var r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=function(){return function(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}}(),i=function(){function e(){}return e.prototype.get=function(e,t){return this.send(r({},t,{method:"GET",url:e}))},e.prototype.post=function(e,t){return this.send(r({},t,{method:"POST",url:e}))},e.prototype.delete=function(e,t){return this.send(r({},t,{method:"DELETE",url:e}))},e.prototype.getCookieString=function(e){return""},e}()},function(e,t,n){n.r(t),n.d(t,"DefaultHttpClient",function(){return u});var r,o=n(4),i=n(5),s=n(7),a=n(8),c=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this)||this;return"undefined"!=typeof XMLHttpRequest?n.httpClient=new a.XhrHttpClient(t):n.httpClient=new s.NodeHttpClient(t),n}return c(t,e),t.prototype.send=function(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new o.AbortError):e.method?e.url?this.httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t.prototype.getCookieString=function(e){return this.httpClient.getCookieString(e)},t}(i.HttpClient)},function(e,t,n){n.r(t),n.d(t,"NodeHttpClient",function(){return s});var r,o=n(5),i=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t){return e.call(this)||this}return i(t,e),t.prototype.send=function(){return Promise.reject(new Error("If using Node either provide an XmlHttpRequest polyfill or consume the cjs or esm script instead of the browser/signalr.js one."))},t}(o.HttpClient)},function(e,t,n){n.r(t),n.d(t,"XhrHttpClient",function(){return c});var r,o=n(4),i=n(5),s=n(9),a=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){var n=e.call(this)||this;return n.logger=t,n}return a(t,e),t.prototype.send=function(e){var t=this;return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new o.AbortError):e.method?e.url?new Promise(function(n,r){var a=new XMLHttpRequest;a.open(e.method,e.url,!0),a.withCredentials=!0,a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var c=e.headers;c&&Object.keys(c).forEach(function(e){a.setRequestHeader(e,c[e])}),e.responseType&&(a.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=function(){a.abort(),r(new o.AbortError)}),e.timeout&&(a.timeout=e.timeout),a.onload=function(){e.abortSignal&&(e.abortSignal.onabort=null),a.status>=200&&a.status<300?n(new i.HttpResponse(a.status,a.statusText,a.response||a.responseText)):r(new o.HttpError(a.statusText,a.status))},a.onerror=function(){t.logger.log(s.LogLevel.Warning,"Error from HTTP request. "+a.status+": "+a.statusText+"."),r(new o.HttpError(a.statusText,a.status))},a.ontimeout=function(){t.logger.log(s.LogLevel.Warning,"Timeout from HTTP request."),r(new o.TimeoutError)},a.send(e.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t}(i.HttpClient)},function(e,t,n){var r;n.r(t),n.d(t,"LogLevel",function(){return r}),function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(r||(r={}))},function(e,t,n){n.r(t),n.d(t,"HubConnectionState",function(){return r}),n.d(t,"HubConnection",function(){return f});var r,o=n(11),i=n(15),s=n(9),a=n(13),c=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},u=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},l=3e4,p=15e3;!function(e){e[e.Disconnected=0]="Disconnected",e[e.Connected=1]="Connected"}(r||(r={}));var f=function(){function e(e,t,n){var s=this;a.Arg.isRequired(e,"connection"),a.Arg.isRequired(t,"logger"),a.Arg.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=l,this.keepAliveIntervalInMilliseconds=p,this.logger=t,this.protocol=n,this.connection=e,this.handshakeProtocol=new o.HandshakeProtocol,this.connection.onreceive=function(e){return s.processIncomingData(e)},this.connection.onclose=function(e){return s.connectionClosed(e)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.id=0,this.receivedHandshakeResponse=!1,this.connectionState=r.Disconnected,this.cachedPingMessage=this.protocol.writeMessage({type:i.MessageType.Ping})}return e.create=function(t,n,r){return new e(t,n,r)},Object.defineProperty(e.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),e.prototype.start=function(){return c(this,void 0,void 0,function(){var e,t,n=this;return u(this,function(o){switch(o.label){case 0:return e={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(s.LogLevel.Debug,"Starting HubConnection."),this.receivedHandshakeResponse=!1,t=new Promise(function(e,t){n.handshakeResolver=e,n.handshakeRejecter=t}),[4,this.connection.start(this.protocol.transferFormat)];case 1:return o.sent(),this.logger.log(s.LogLevel.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(e))];case 2:return o.sent(),this.logger.log(s.LogLevel.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,t];case 3:return o.sent(),this.connectionState=r.Connected,[2]}})})},e.prototype.stop=function(){return this.logger.log(s.LogLevel.Debug,"Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),this.connection.stop()},e.prototype.stream=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o,s=this.createStreamInvocation(e,n),c=new a.Subject;c.cancelCallback=function(){var e=t.createCancelInvocation(s.invocationId),n=t.protocol.writeMessage(e);return delete t.callbacks[s.invocationId],o.then(function(){return t.sendMessage(n)})},this.callbacks[s.invocationId]=function(e,t){t?c.error(t):e&&(e.type===i.MessageType.Completion?e.error?c.error(new Error(e.error)):c.complete():c.next(e.item))};var u=this.protocol.writeMessage(s);return o=this.sendMessage(u).catch(function(e){c.error(e),delete t.callbacks[s.invocationId]}),c},e.prototype.sendMessage=function(e){return this.resetKeepAliveInterval(),this.connection.send(e)},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.createInvocation(e,t,!0),o=this.protocol.writeMessage(r);return this.sendMessage(o)},e.prototype.invoke=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.createInvocation(e,n,!1);return new Promise(function(e,n){t.callbacks[o.invocationId]=function(t,r){r?n(r):t&&(t.type===i.MessageType.Completion?t.error?n(new Error(t.error)):e(t.result):n(new Error("Unexpected message type: "+t.type)))};var r=t.protocol.writeMessage(o);t.sendMessage(r).catch(function(e){n(e),delete t.callbacks[o.invocationId]})})},e.prototype.on=function(e,t){e&&t&&(e=e.toLowerCase(),this.methods[e]||(this.methods[e]=[]),-1===this.methods[e].indexOf(t)&&this.methods[e].push(t))},e.prototype.off=function(e,t){if(e){e=e.toLowerCase();var n=this.methods[e];if(n)if(t){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this.methods[e])}else delete this.methods[e]}},e.prototype.onclose=function(e){e&&this.closedCallbacks.push(e)},e.prototype.processIncomingData=function(e){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(e=this.processHandshakeResponse(e),this.receivedHandshakeResponse=!0),e)for(var t=0,n=this.protocol.parseMessages(e,this.logger);t<n.length;t++){var r=n[t];switch(r.type){case i.MessageType.Invocation:this.invokeClientMethod(r);break;case i.MessageType.StreamItem:case i.MessageType.Completion:var o=this.callbacks[r.invocationId];null!=o&&(r.type===i.MessageType.Completion&&delete this.callbacks[r.invocationId],o(r));break;case i.MessageType.Ping:break;case i.MessageType.Close:this.logger.log(s.LogLevel.Information,"Close message received from server."),this.connection.stop(r.error?new Error("Server returned an error on close: "+r.error):void 0);break;default:this.logger.log(s.LogLevel.Warning,"Invalid message type: "+r.type+".")}}this.resetTimeoutPeriod()},e.prototype.processHandshakeResponse=function(e){var t,n,r;try{r=(t=this.handshakeProtocol.parseHandshakeResponse(e))[0],n=t[1]}catch(e){var o="Error parsing handshake response: "+e;this.logger.log(s.LogLevel.Error,o);var i=new Error(o);throw this.connection.stop(i),this.handshakeRejecter(i),i}if(n.error){o="Server returned handshake error: "+n.error;throw this.logger.log(s.LogLevel.Error,o),this.handshakeRejecter(o),this.connection.stop(new Error(o)),new Error(o)}return this.logger.log(s.LogLevel.Debug,"Server handshake complete."),this.handshakeResolver(),r},e.prototype.resetKeepAliveInterval=function(){var e=this;this.cleanupPingTimer(),this.pingServerHandle=setTimeout(function(){return c(e,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:if(this.connectionState!==r.Connected)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}})})},this.keepAliveIntervalInMilliseconds)},e.prototype.resetTimeoutPeriod=function(){var e=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout(function(){return e.serverTimeout()},this.serverTimeoutInMilliseconds))},e.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},e.prototype.invokeClientMethod=function(e){var t=this,n=this.methods[e.target.toLowerCase()];if(n){if(n.forEach(function(n){return n.apply(t,e.arguments)}),e.invocationId){var r="Server requested a response, which is not supported in this version of the client.";this.logger.log(s.LogLevel.Error,r),this.connection.stop(new Error(r))}}else this.logger.log(s.LogLevel.Warning,"No client method with the name '"+e.target+"' found.")},e.prototype.connectionClosed=function(e){var t=this,n=this.callbacks;this.callbacks={},this.connectionState=r.Disconnected,this.handshakeRejecter&&this.handshakeRejecter(e),Object.keys(n).forEach(function(t){(0,n[t])(null,e||new Error("Invocation canceled due to connection being closed."))}),this.cleanupTimeout(),this.cleanupPingTimer(),this.closedCallbacks.forEach(function(n){return n.apply(t,[e])})},e.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},e.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},e.prototype.createInvocation=function(e,t,n){if(n)return{arguments:t,target:e,type:i.MessageType.Invocation};var r=this.id;return this.id++,{arguments:t,invocationId:r.toString(),target:e,type:i.MessageType.Invocation}},e.prototype.createStreamInvocation=function(e,t){var n=this.id;return this.id++,{arguments:t,invocationId:n.toString(),target:e,type:i.MessageType.StreamInvocation}},e.prototype.createCancelInvocation=function(e){return{invocationId:e,type:i.MessageType.CancelInvocation}},e}()},function(e,t,n){n.r(t),n.d(t,"HandshakeProtocol",function(){return i});var r=n(12),o=n(13),i=function(){function e(){}return e.prototype.writeHandshakeRequest=function(e){return r.TextMessageFormat.write(JSON.stringify(e))},e.prototype.parseHandshakeResponse=function(e){var t,n;if(Object(o.isArrayBuffer)(e)||"undefined"!=typeof Buffer&&e instanceof Buffer){var i=new Uint8Array(e);if(-1===(a=i.indexOf(r.TextMessageFormat.RecordSeparatorCode)))throw new Error("Message is incomplete.");var s=a+1;t=String.fromCharCode.apply(null,i.slice(0,s)),n=i.byteLength>s?i.slice(s).buffer:null}else{var a,c=e;if(-1===(a=c.indexOf(r.TextMessageFormat.RecordSeparator)))throw new Error("Message is incomplete.");s=a+1;t=c.substring(0,s),n=c.length>s?c.substring(s):null}var u=r.TextMessageFormat.parse(t),l=JSON.parse(u[0]);if(l.type)throw new Error("Expected a handshake response from the server.");return[n,l]},e}()},function(e,t,n){n.r(t),n.d(t,"TextMessageFormat",function(){return r});var r=function(){function e(){}return e.write=function(t){return""+t+e.RecordSeparator},e.parse=function(t){if(t[t.length-1]!==e.RecordSeparator)throw new Error("Message is incomplete.");var n=t.split(e.RecordSeparator);return n.pop(),n},e.RecordSeparatorCode=30,e.RecordSeparator=String.fromCharCode(e.RecordSeparatorCode),e}()},function(e,t,n){n.r(t),n.d(t,"Arg",function(){return a}),n.d(t,"getDataDetail",function(){return c}),n.d(t,"formatArrayBuffer",function(){return u}),n.d(t,"isArrayBuffer",function(){return l}),n.d(t,"sendMessage",function(){return p}),n.d(t,"createLogger",function(){return f}),n.d(t,"Subject",function(){return h}),n.d(t,"SubjectSubscription",function(){return g}),n.d(t,"ConsoleLogger",function(){return d});var r=n(9),o=n(14),i=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},s=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=function(){function e(){}return e.isRequired=function(e,t){if(null==e)throw new Error("The '"+t+"' argument is required.")},e.isIn=function(e,t,n){if(!(e in t))throw new Error("Unknown "+n+" value: "+e+".")},e}();function c(e,t){var n="";return l(e)?(n="Binary data of length "+e.byteLength,t&&(n+=". Content: '"+u(e)+"'")):"string"==typeof e&&(n="String data of length "+e.length,t&&(n+=". Content: '"+e+"'")),n}function u(e){var t=new Uint8Array(e),n="";return t.forEach(function(e){n+="0x"+(e<16?"0":"")+e.toString(16)+" "}),n.substr(0,n.length-1)}function l(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function p(e,t,n,o,a,u,p){return i(this,void 0,void 0,function(){var i,f,h,g,d;return s(this,function(s){switch(s.label){case 0:return a?[4,a()]:[3,2];case 1:(h=s.sent())&&((i={}).Authorization="Bearer "+h,f=i),s.label=2;case 2:return e.log(r.LogLevel.Trace,"("+t+" transport) sending data. "+c(u,p)+"."),g=l(u)?"arraybuffer":"text",[4,n.post(o,{content:u,headers:f,responseType:g})];case 3:return d=s.sent(),e.log(r.LogLevel.Trace,"("+t+" transport) request complete. Response status: "+d.statusCode+"."),[2]}})})}function f(e){return void 0===e?new d(r.LogLevel.Information):null===e?o.NullLogger.instance:e.log?e:new d(e)}var h=function(){function e(){this.observers=[]}return e.prototype.next=function(e){for(var t=0,n=this.observers;t<n.length;t++){n[t].next(e)}},e.prototype.error=function(e){for(var t=0,n=this.observers;t<n.length;t++){var r=n[t];r.error&&r.error(e)}},e.prototype.complete=function(){for(var e=0,t=this.observers;e<t.length;e++){var n=t[e];n.complete&&n.complete()}},e.prototype.subscribe=function(e){return this.observers.push(e),new g(this,e)},e}(),g=function(){function e(e,t){this.subject=e,this.observer=t}return e.prototype.dispose=function(){var e=this.subject.observers.indexOf(this.observer);e>-1&&this.subject.observers.splice(e,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch(function(e){})},e}(),d=function(){function e(e){this.minimumLogLevel=e}return e.prototype.log=function(e,t){if(e>=this.minimumLogLevel)switch(e){case r.LogLevel.Critical:case r.LogLevel.Error:console.error("["+(new Date).toISOString()+"] "+r.LogLevel[e]+": "+t);break;case r.LogLevel.Warning:console.warn("["+(new Date).toISOString()+"] "+r.LogLevel[e]+": "+t);break;case r.LogLevel.Information:console.info("["+(new Date).toISOString()+"] "+r.LogLevel[e]+": "+t);break;default:console.log("["+(new Date).toISOString()+"] "+r.LogLevel[e]+": "+t)}},e}()},function(e,t,n){n.r(t),n.d(t,"NullLogger",function(){return r});var r=function(){function e(){}return e.prototype.log=function(e,t){},e.instance=new e,e}()},function(e,t,n){var r;n.r(t),n.d(t,"MessageType",function(){return r}),function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close"}(r||(r={}))},function(e,t,n){n.r(t),n.d(t,"HubConnectionBuilder",function(){return c});var r=n(17),o=n(10),i=n(23),s=n(14),a=n(13),c=function(){function e(){}return e.prototype.configureLogging=function(e){return a.Arg.isRequired(e,"logging"),void 0!==e.log?this.logger=e:this.logger=new a.ConsoleLogger(e),this},e.prototype.withUrl=function(e,t){return a.Arg.isRequired(e,"url"),this.url=e,this.httpConnectionOptions="object"==typeof t?t:{transport:t},this},e.prototype.withHubProtocol=function(e){return a.Arg.isRequired(e,"protocol"),this.protocol=e,this},e.prototype.build=function(){var e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var t=new r.HttpConnection(this.url,e);return o.HubConnection.create(t,this.logger||s.NullLogger.instance,this.protocol||new i.JsonHubProtocol)},e}()},function(e,t,n){n.r(t),n.d(t,"HttpConnection",function(){return d});var r=n(6),o=n(9),i=n(18),s=n(19),a=n(21),c=n(13),u=n(22),l=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},p=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},f=null,h=null;if("undefined"==typeof window){var g=R;f=g("ws"),h=g("eventsource")}var d=function(){function e(e,t){void 0===t&&(t={}),this.features={},c.Arg.isRequired(e,"url"),this.logger=Object(c.createLogger)(t.logger),this.baseUrl=this.resolveUrl(e),(t=t||{}).logMessageContent=t.logMessageContent||!1;var n="undefined"==typeof window;n||"undefined"==typeof WebSocket||t.WebSocket?n&&!t.WebSocket&&f&&(t.WebSocket=f):t.WebSocket=WebSocket,n||"undefined"==typeof EventSource||t.EventSource?n&&!t.EventSource&&void 0!==h&&(t.EventSource=h):t.EventSource=EventSource,this.httpClient=t.httpClient||new r.DefaultHttpClient(this.logger),this.connectionState=2,this.options=t,this.onreceive=null,this.onclose=null}return e.prototype.start=function(e){return e=e||i.TransferFormat.Binary,c.Arg.isIn(e,i.TransferFormat,"transferFormat"),this.logger.log(o.LogLevel.Debug,"Starting connection with transfer format '"+i.TransferFormat[e]+"'."),2!==this.connectionState?Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state.")):(this.connectionState=0,this.startPromise=this.startInternal(e),this.startPromise)},e.prototype.send=function(e){if(1!==this.connectionState)throw new Error("Cannot send data if the connection is not in the 'Connected' State.");return this.transport.send(e)},e.prototype.stop=function(e){return l(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:this.connectionState=2,this.stopError=e,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startPromise];case 2:return t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return this.transport?[4,this.transport.stop()]:[3,6];case 5:t.sent(),this.transport=void 0,t.label=6;case 6:return[2]}})})},e.prototype.startInternal=function(e){return l(this,void 0,void 0,function(){var t,n,r,a,c,u,l,f=this;return p(this,function(h){switch(h.label){case 0:t=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,h.label=1;case 1:return h.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==i.HttpTransportType.WebSockets?[3,3]:(this.transport=this.constructTransport(i.HttpTransportType.WebSockets),[4,this.transport.connect(t,e)]):[3,5];case 2:return h.sent(),[3,4];case 3:throw Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:n=null,r=0,a=function(){var e;return p(this,function(o){switch(o.label){case 0:return[4,c.getNegotiationResponse(t)];case 1:if(n=o.sent(),2===c.connectionState)return[2,{value:void 0}];if(n.error)throw Error(n.error);if(n.ProtocolVersion)throw Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return n.url&&(t=n.url),n.accessToken&&(e=n.accessToken,c.accessTokenFactory=function(){return e}),r++,[2]}})},c=this,h.label=6;case 6:return[5,a()];case 7:if("object"==typeof(u=h.sent()))return[2,u.value];h.label=8;case 8:if(n.url&&r<100)return[3,6];h.label=9;case 9:if(100===r&&n.url)throw Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(t,this.options.transport,n,e)];case 10:h.sent(),h.label=11;case 11:return this.transport instanceof s.LongPollingTransport&&(this.features.inherentKeepAlive=!0),this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return f.stopConnection(e)},this.changeState(0,1),[3,13];case 12:throw l=h.sent(),this.logger.log(o.LogLevel.Error,"Failed to start the connection: "+l),this.connectionState=2,this.transport=void 0,l;case 13:return[2]}})})},e.prototype.getNegotiationResponse=function(e){return l(this,void 0,void 0,function(){var t,n,r,i,s,a;return p(this,function(c){switch(c.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(r=c.sent())&&((t={}).Authorization="Bearer "+r,n=t),c.label=2;case 2:i=this.resolveNegotiateUrl(e),this.logger.log(o.LogLevel.Debug,"Sending negotiation request: "+i+"."),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,this.httpClient.post(i,{content:"",headers:n})];case 4:if(200!==(s=c.sent()).statusCode)throw Error("Unexpected status code returned from negotiate "+s.statusCode);return[2,JSON.parse(s.content)];case 5:throw a=c.sent(),this.logger.log(o.LogLevel.Error,"Failed to complete negotiation with the server: "+a),a;case 6:return[2]}})})},e.prototype.createConnectUrl=function(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+"id="+t:e},e.prototype.createTransport=function(e,t,n,r){return l(this,void 0,void 0,function(){var s,a,c,u,l,f,h;return p(this,function(p){switch(p.label){case 0:return s=this.createConnectUrl(e,n.connectionId),this.isITransport(t)?(this.logger.log(o.LogLevel.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,[4,this.transport.connect(s,r)]):[3,2];case 1:return p.sent(),this.changeState(0,1),[2];case 2:a=n.availableTransports||[],c=0,u=a,p.label=3;case 3:return c<u.length?(l=u[c],this.connectionState=0,"number"!=typeof(f=this.resolveTransport(l,t,r))?[3,8]:(this.transport=this.constructTransport(f),n.connectionId?[3,5]:[4,this.getNegotiationResponse(e)])):[3,9];case 4:n=p.sent(),s=this.createConnectUrl(e,n.connectionId),p.label=5;case 5:return p.trys.push([5,7,,8]),[4,this.transport.connect(s,r)];case 6:return p.sent(),this.changeState(0,1),[2];case 7:return h=p.sent(),this.logger.log(o.LogLevel.Error,"Failed to start the transport '"+i.HttpTransportType[f]+"': "+h),this.connectionState=2,n.connectionId=void 0,[3,8];case 8:return c++,[3,3];case 9:throw new Error("Unable to initialize any of the available transports.")}})})},e.prototype.constructTransport=function(e){switch(e){case i.HttpTransportType.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new u.WebSocketTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case i.HttpTransportType.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new a.ServerSentEventsTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case i.HttpTransportType.LongPolling:return new s.LongPollingTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+e+".")}},e.prototype.resolveTransport=function(e,t,n){var r=i.HttpTransportType[e.transport];if(null==r)this.logger.log(o.LogLevel.Debug,"Skipping transport '"+e.transport+"' because it is not supported by this client.");else{var s=e.transferFormats.map(function(e){return i.TransferFormat[e]});if(function(e,t){return!e||0!=(t&e)}(t,r))if(s.indexOf(n)>=0){if((r!==i.HttpTransportType.WebSockets||this.options.WebSocket)&&(r!==i.HttpTransportType.ServerSentEvents||this.options.EventSource))return this.logger.log(o.LogLevel.Debug,"Selecting transport '"+i.HttpTransportType[r]+"'."),r;this.logger.log(o.LogLevel.Debug,"Skipping transport '"+i.HttpTransportType[r]+"' because it is not supported in your environment.'")}else this.logger.log(o.LogLevel.Debug,"Skipping transport '"+i.HttpTransportType[r]+"' because it does not support the requested transfer format '"+i.TransferFormat[n]+"'.");else this.logger.log(o.LogLevel.Debug,"Skipping transport '"+i.HttpTransportType[r]+"' because it was disabled by the client.")}return null},e.prototype.isITransport=function(e){return e&&"object"==typeof e&&"connect"in e},e.prototype.changeState=function(e,t){return this.connectionState===e&&(this.connectionState=t,!0)},e.prototype.stopConnection=function(e){this.transport=void 0,(e=this.stopError||e)?this.logger.log(o.LogLevel.Error,"Connection disconnected with error '"+e+"'."):this.logger.log(o.LogLevel.Information,"Connection disconnected."),this.connectionState=2,this.onclose&&this.onclose(e)},e.prototype.resolveUrl=function(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if("undefined"==typeof window||!window||!window.document)throw new Error("Cannot resolve '"+e+"'.");var t=window.document.createElement("a");return t.href=e,this.logger.log(o.LogLevel.Information,"Normalizing '"+e+"' to '"+t.href+"'."),t.href},e.prototype.resolveNegotiateUrl=function(e){var t=e.indexOf("?"),n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",n+=-1===t?"":e.substring(t)},e}()},function(e,t,n){var r,o;n.r(t),n.d(t,"HttpTransportType",function(){return r}),n.d(t,"TransferFormat",function(){return o}),function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"}(r||(r={})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(o||(o={}))},function(e,t,n){n.r(t),n.d(t,"LongPollingTransport",function(){return l});var r=n(20),o=n(4),i=n(9),s=n(18),a=n(13),c=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},u=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},l=function(){function e(e,t,n,o){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.pollAbort=new r.AbortController,this.logMessageContent=o,this.running=!1,this.onreceive=null,this.onclose=null}return Object.defineProperty(e.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),e.prototype.connect=function(e,t){return c(this,void 0,void 0,function(){var n,r,c,l;return u(this,function(u){switch(u.label){case 0:if(a.Arg.isRequired(e,"url"),a.Arg.isRequired(t,"transferFormat"),a.Arg.isIn(t,s.TransferFormat,"transferFormat"),this.url=e,this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Connecting."),t===s.TransferFormat.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return n={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},t===s.TransferFormat.Binary&&(n.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return r=u.sent(),this.updateHeaderToken(n,r),c=e+"&_="+Date.now(),this.logger.log(i.LogLevel.Trace,"(LongPolling transport) polling: "+c+"."),[4,this.httpClient.get(c,n)];case 2:return 200!==(l=u.sent()).statusCode?(this.logger.log(i.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+l.statusCode+"."),this.closeError=new o.HttpError(l.statusText||"",l.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,n),[2]}})})},e.prototype.getAccessToken=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,null]}})})},e.prototype.updateHeaderToken=function(e,t){e.headers||(e.headers={}),t?e.headers.Authorization="Bearer "+t:e.headers.Authorization&&delete e.headers.Authorization},e.prototype.poll=function(e,t){return c(this,void 0,void 0,function(){var n,r,s,c;return u(this,function(u){switch(u.label){case 0:u.trys.push([0,,8,9]),u.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:n=u.sent(),this.updateHeaderToken(t,n),u.label=3;case 3:return u.trys.push([3,5,,6]),r=e+"&_="+Date.now(),this.logger.log(i.LogLevel.Trace,"(LongPolling transport) polling: "+r+"."),[4,this.httpClient.get(r,t)];case 4:return 204===(s=u.sent()).statusCode?(this.logger.log(i.LogLevel.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==s.statusCode?(this.logger.log(i.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+s.statusCode+"."),this.closeError=new o.HttpError(s.statusText||"",s.statusCode),this.running=!1):s.content?(this.logger.log(i.LogLevel.Trace,"(LongPolling transport) data received. "+Object(a.getDataDetail)(s.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(s.content)):this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return c=u.sent(),this.running?c instanceof o.TimeoutError?this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=c,this.running=!1):this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Poll errored after shutdown: "+c.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}})})},e.prototype.send=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return this.running?[2,Object(a.sendMessage)(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},e.prototype.stop=function(){return c(this,void 0,void 0,function(){var e,t;return u(this,function(n){switch(n.label){case 0:this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),n.label=1;case 1:return n.trys.push([1,,5,6]),[4,this.receiving];case 2:return n.sent(),this.logger.log(i.LogLevel.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),e={headers:{}},[4,this.getAccessToken()];case 3:return t=n.sent(),this.updateHeaderToken(e,t),[4,this.httpClient.delete(this.url,e)];case 4:return n.sent(),this.logger.log(i.LogLevel.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(i.LogLevel.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}})})},e.prototype.raiseOnClose=function(){if(this.onclose){var e="(LongPolling transport) Firing onclose event.";this.closeError&&(e+=" Error: "+this.closeError),this.logger.log(i.LogLevel.Trace,e),this.onclose(this.closeError)}},e}()},function(e,t,n){n.r(t),n.d(t,"AbortController",function(){return r});var r=function(){function e(){this.isAborted=!1,this.onabort=null}return e.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(e.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),e}()},function(e,t,n){n.r(t),n.d(t,"ServerSentEventsTransport",function(){return c});var r=n(9),o=n(18),i=n(13),s=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},a=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},c=function(){function e(e,t,n,r,o){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.logMessageContent=r,this.eventSourceConstructor=o,this.onreceive=null,this.onclose=null}return e.prototype.connect=function(e,t){return s(this,void 0,void 0,function(){var n,s=this;return a(this,function(a){switch(a.label){case 0:return i.Arg.isRequired(e,"url"),i.Arg.isRequired(t,"transferFormat"),i.Arg.isIn(t,o.TransferFormat,"transferFormat"),this.logger.log(r.LogLevel.Trace,"(SSE transport) Connecting."),this.url=e,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=a.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),a.label=2;case 2:return[2,new Promise(function(n,a){var c=!1;if(t===o.TransferFormat.Text){var u;if("undefined"!=typeof window)u=new s.eventSourceConstructor(e,{withCredentials:!0});else{var l=s.httpClient.getCookieString(e);u=new s.eventSourceConstructor(e,{withCredentials:!0,headers:{Cookie:l}})}try{u.onmessage=function(e){if(s.onreceive)try{s.logger.log(r.LogLevel.Trace,"(SSE transport) data received. "+Object(i.getDataDetail)(e.data,s.logMessageContent)+"."),s.onreceive(e.data)}catch(e){return void s.close(e)}},u.onerror=function(e){var t=new Error(e.data||"Error occurred");c?s.close(t):a(t)},u.onopen=function(){s.logger.log(r.LogLevel.Information,"SSE connected to "+s.url),s.eventSource=u,c=!0,n()}}catch(e){return void a(e)}}else a(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})]}})})},e.prototype.send=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){return this.eventSource?[2,Object(i.sendMessage)(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},e.prototype.stop=function(){return this.close(),Promise.resolve()},e.prototype.close=function(e){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(e))},e}()},function(e,t,n){n.r(t),n.d(t,"WebSocketTransport",function(){return a});var r=n(9),o=n(18),i=n(13),s=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=function(){function e(e,t,n,r,o){this.logger=n,this.accessTokenFactory=t,this.logMessageContent=r,this.webSocketConstructor=o,this.httpClient=e,this.onreceive=null,this.onclose=null}return e.prototype.connect=function(e,t){return n=this,a=void 0,u=function(){var n,a=this;return s(this,function(s){switch(s.label){case 0:return i.Arg.isRequired(e,"url"),i.Arg.isRequired(t,"transferFormat"),i.Arg.isIn(t,o.TransferFormat,"transferFormat"),this.logger.log(r.LogLevel.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=s.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),s.label=2;case 2:return[2,new Promise(function(n,s){var c;e=e.replace(/^http/,"ws");var u=a.httpClient.getCookieString(e);"undefined"==typeof window&&u&&(c=new a.webSocketConstructor(e,void 0,{headers:{Cookie:""+u}})),c||(c=new a.webSocketConstructor(e)),t===o.TransferFormat.Binary&&(c.binaryType="arraybuffer"),c.onopen=function(t){a.logger.log(r.LogLevel.Information,"WebSocket connected to "+e+"."),a.webSocket=c,n()},c.onerror=function(e){var t=null;"undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent&&(t=e.error),s(t)},c.onmessage=function(e){a.logger.log(r.LogLevel.Trace,"(WebSockets transport) data received. "+Object(i.getDataDetail)(e.data,a.logMessageContent)+"."),a.onreceive&&a.onreceive(e.data)},c.onclose=function(e){return a.close(e)}})]}})},new((c=void 0)||(c=Promise))(function(e,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new c(function(e){e(t.value)}).then(r,o)}i((u=u.apply(n,a||[])).next())});var n,a,c,u},e.prototype.send=function(e){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(r.LogLevel.Trace,"(WebSockets transport) sending data. "+Object(i.getDataDetail)(e,this.logMessageContent)+"."),this.webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},e.prototype.stop=function(){return this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0,this.close(void 0)),Promise.resolve()},e.prototype.close=function(e){this.logger.log(r.LogLevel.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!e||!1!==e.wasClean&&1e3===e.code?this.onclose():this.onclose(new Error("WebSocket closed with status code: "+e.code+" ("+e.reason+").")))},e}()},function(e,t,n){n.r(t),n.d(t,"JsonHubProtocol",function(){return u});var r=n(15),o=n(9),i=n(18),s=n(14),a=n(12),c="json",u=function(){function e(){this.name=c,this.version=1,this.transferFormat=i.TransferFormat.Text}return e.prototype.parseMessages=function(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=s.NullLogger.instance);for(var n=[],i=0,c=a.TextMessageFormat.parse(e);i<c.length;i++){var u=c[i],l=JSON.parse(u);if("number"!=typeof l.type)throw new Error("Invalid payload.");switch(l.type){case r.MessageType.Invocation:this.isInvocationMessage(l);break;case r.MessageType.StreamItem:this.isStreamItemMessage(l);break;case r.MessageType.Completion:this.isCompletionMessage(l);break;case r.MessageType.Ping:case r.MessageType.Close:break;default:t.log(o.LogLevel.Information,"Unknown message type '"+l.type+"' ignored.");continue}n.push(l)}return n},e.prototype.writeMessage=function(e){return a.TextMessageFormat.write(JSON.stringify(e))},e.prototype.isInvocationMessage=function(e){this.assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this.assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")},e.prototype.isStreamItemMessage=function(e){if(this.assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")},e.prototype.isCompletionMessage=function(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this.assertNotEmptyString(e.error,"Invalid payload for Completion message."),this.assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")},e.prototype.assertNotEmptyString=function(e,t){if("string"!=typeof e||""===e)throw new Error(t)},e}()}])},e.exports=n()}(D={exports:{}},D.exports),D.exports),B=(q=U)&&q.__esModule&&Object.prototype.hasOwnProperty.call(q,"default")?q.default:q;function W(e){return`${e.sid}-${e.sender}`}const J="https://duel-pig.azurewebsites.net/api";function K(e,t){return fetch(`${J}/${e}`,{method:"POST",headers:{"Content-Type":"application/json","x-uid":W(t)},body:JSON.stringify(t)}).catch(console.error)}function z(e,t,n){const r=Object.create(e);return r.v=t[n],r}function X(e){for(var t,n,r=[3,5],o=[],i=0;i<2;i+=1)o[i]=G(z(e,r,i));return{c(){t=p("select");for(var r=0;r<2;r+=1)o[r].c();void 0===e.bo&&P(()=>e.select_change_handler.call(t)),t.className="svelte-1a4xu5q",n=d(t,"change",e.select_change_handler)},m(n,r){c(n,t,r);for(var i=0;i<2;i+=1)o[i].m(t,null);m(t,e.bo)},p(e,n){e.bo&&m(t,n.bo)},d(e){e&&u(t),l(o,e),n()}}}function G(t){var n,r,o;return{c(){n=p("option"),r=f("Best of "),o=f(t.v),n.__value=t.v,n.value=n.__value,n.className="svelte-1a4xu5q"},m(e,t){c(e,n,t),a(n,r),a(n,o)},p:e,d(e){e&&u(n)}}}function V(t){var n,r,i,s,l,f,g,v=!t.sid&&X(t);return{c(){var e,o,a,c;n=p("div"),r=p("form"),i=p("input"),s=h(),v&&v.c(),l=h(),(f=p("button")).textContent="Go",e=i,o="type",null==(a="text")?e.removeAttribute(o):e.setAttribute(o,a),i.name="nick",i.placeholder="nick",i.className="svelte-1a4xu5q",f.type="submit",f.className="svelte-1a4xu5q",r.className="options svelte-1a4xu5q",n.className="deck svelte-1a4xu5q",g=[d(i,"input",t.input_input_handler),d(r,"submit",(c=t.onSubmit,function(e){return e.preventDefault(),c.call(this,e)}))]},m(e,o){c(e,n,o),a(n,r),a(r,i),i.value=t.nick,a(r,s),v&&v.m(r,null),a(r,l),a(r,f)},p(e,t){e.nick&&i.value!==t.nick&&(i.value=t.nick),t.sid?v&&(v.d(1),v=null):v?v.p(e,t):((v=X(t)).c(),v.m(r,l))},i:e,o:e,d(e){e&&u(n),v&&v.d(),o(g)}}}const Y="nick",Q="bo";function Z(e,t,n){let{sid:r=null}=t;const o=S();let i=localStorage.getItem(Y),s=+localStorage.getItem(Q)||3;return e.$set=(e=>{"sid"in e&&n("sid",r=e.sid)}),{sid:r,nick:i,bo:s,onSubmit:function(){localStorage.setItem(Y,i),localStorage.setItem(Q,s);const e={bo:s,sid:r||Math.random().toString(36).substring(2)};var t;return(t=e).bo&&t.sid&&(window.location.hash=`${t.bo}-${t.sid}`),o("next",e),!1},input_input_handler:function(){i=this.value,n("nick",i)},select_change_handler:function(){s=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n("bo",s)}}}class ee extends F{constructor(e){super(),N(this,e,Z,V,s,["sid"])}}function te(e,t,n){const r=Object.create(e);return r.item=t[n],r}function ne(e){var t,n,r,o,i,s,l=e._(e.arrangement[e.item].by);return{c(){t=p("span"),n=f(l),o=h(),i=p("span"),t.className=r="party "+e.arrangement[e.item].by+" svelte-1v5f92b",i.className=s="action "+e.arrangement[e.item].action+" svelte-1v5f92b"},m(e,r){c(e,t,r),a(t,n),c(e,o,r),c(e,i,r)},p(e,o){(e.arrangement||e.items)&&l!==(l=o._(o.arrangement[o.item].by))&&v(n,l),(e.arrangement||e.items)&&r!==(r="party "+o.arrangement[o.item].by+" svelte-1v5f92b")&&(t.className=r),(e.arrangement||e.items)&&s!==(s="action "+o.arrangement[o.item].action+" svelte-1v5f92b")&&(i.className=s)},d(e){e&&(u(t),u(o),u(i))}}}function re(e){var t,n,r,o,i,s,l,f,g,v,m,b=e.arrangement[e.item]&&ne(e);function y(...t){return e.click_handler(e,...t)}return{c(){t=p("li"),n=p("button"),b&&b.c(),r=h(),o=p("img"),l=h(),f=p("span"),v=h(),o.src=i="img/"+e.img+"/"+e.item+".jpg",o.alt=s=e.item,o.className="svelte-1v5f92b",f.className="overlay svelte-1v5f92b",n.className="tile svelte-1v5f92b",n.disabled=e.disabled,n.title=g=e._(e.item),t.className="svelte-1v5f92b",m=d(n,"click",y)},m(e,i){c(e,t,i),a(t,n),b&&b.m(n,null),a(n,r),a(n,o),a(n,l),a(n,f),a(t,v)},p(t,a){(e=a).arrangement[e.item]?b?b.p(t,e):((b=ne(e)).c(),b.m(n,r)):b&&(b.d(1),b=null),(t.img||t.items)&&i!==(i="img/"+e.img+"/"+e.item+".jpg")&&(o.src=i),t.items&&s!==(s=e.item)&&(o.alt=s),t.disabled&&(n.disabled=e.disabled),t.items&&g!==(g=e._(e.item))&&(n.title=g)},d(e){e&&u(t),b&&b.d(),m()}}}function oe(t){for(var n,r,o,i=t.items,s=[],f=0;f<i.length;f+=1)s[f]=re(te(t,i,f));return{c(){n=p("div"),r=p("section"),o=p("ul");for(var e=0;e<s.length;e+=1)s[e].c();o.className="svelte-1v5f92b",r.className="svelte-1v5f92b",n.className=t.cls+" svelte-1v5f92b"},m(e,t){c(e,n,t),a(n,r),a(r,o);for(var i=0;i<s.length;i+=1)s[i].m(o,null)},p(e,t){if(e.disabled||e._||e.items||e.img||e.arrangement){i=t.items;for(var r=0;r<i.length;r+=1){const n=te(t,i,r);s[r]?s[r].p(e,n):(s[r]=re(n),s[r].c(),s[r].m(o,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}e.cls&&(n.className=t.cls+" svelte-1v5f92b")},i:e,o:e,d(e){e&&u(n),l(s,e)}}}function ie(e,t,n){let{items:r,arrangement:o,img:i,disabled:s,cls:a,labels:c}=t;const u=S();return e.$set=(e=>{"items"in e&&n("items",r=e.items),"arrangement"in e&&n("arrangement",o=e.arrangement),"img"in e&&n("img",i=e.img),"disabled"in e&&n("disabled",s=e.disabled),"cls"in e&&n("cls",a=e.cls),"labels"in e&&n("labels",c=e.labels)}),{items:r,arrangement:o,img:i,disabled:s,cls:a,labels:c,dispatch:u,_:function(e){return c[e]||e||""},click_handler:function({item:e},t){return u("click",e)}}}class se extends F{constructor(e){super(),N(this,e,ie,oe,s,["items","arrangement","img","disabled","cls","labels"])}}var ae={null:"","what-to-do":"Send the link to the other party","us-ban-maps":"ban a map","us-pick-maps":"pick a map","us-ban-champs":"ban a champ","us-pick-champs":"pick a champ","them-ban-maps":"wait for opponent map ban","them-pick-maps":"wait for opponent map pick","them-ban-champs":"wait for opponent champ ban","them-pick-champs":"wait for opponent champ pick","null-null-done":"gl & hf","undefined-undefined-undefined":" ",awoken:"Awoken",blood_covenant:"Blood Covenant",blood_run:"Blood Run",burial_chamber:"Burial Chamber",church:"Church of Azathoth",corrupted_keep:"Corrupted Keep",lockbox:"Lockbox",longest_yard:"Longest Yard",ruins_of_sarnath:"Ruins of Sarnath",tempest_shrine:"Tempest Shrine",the_molten_falls:"Molten Falls",vale_of_pnath:"Vale of Pnath",anarki:"Anarki",athena:"Athena",bj:"BJ Blazkowicz",clutch:"Clutch",death_knight:"Death Knight",doom:"DOOM Slayer",eisen:"Eisen",galena:"Galena",keel:"Keel",nyx:"Nyx",ranger:"Ranger",scalebearer:"Scalebearer",slash:"Slash",sorlag:"Sorlag",strogg:"Strogg & Peeker",visor:"Visor"};const ce={TOSS:"toss",MAPS:"maps",CHAMPS:"champs",DONE:"done"},ue={BAN:"ban",PICK:"pick"};function le(){}function pe(e,t=le){let n;const r=[];function o(t){if(i=t,(o=e)!=o?i==i:o!==i||o&&"object"==typeof o||"function"==typeof o){if(e=t,!n)return;r.forEach(e=>e[1]()),r.forEach(t=>t[0](e))}var o,i}return{set:o,update:function(t){o(t(e))},subscribe:function(i,s=le){const a=[i,s];return r.push(a),1===r.length&&(n=t(o)||le),i(e),()=>{const e=r.indexOf(a);-1!==e&&r.splice(e,1),0===r.length&&n()}}}}const fe={subscribe:pe(null,function(e){return setTimeout(()=>e({maps:["awoken","blood_covenant","blood_run","corrupted_keep","ruins_of_sarnath","the_molten_falls","vale_of_pnath"],champs:["anarki","athena","bj","clutch","death_knight","doom","eisen","galena","keel","nyx","ranger","scalebearer","slash","sorlag","strogg","visor"]}),100),function(){}}).subscribe};function he(e){var t,n,r,o,i,s,l,g=e._(e.arrangement.by+"-"+e.arrangement.action+"-"+e.arrangement.state),d=new se({props:{cls:e.arrangement.state+" "+e.arrangement.action,labels:e.l,items:e.maps,arrangement:e.arrangement.maps,disabled:e.mapsDisabled,img:"maps"}});d.$on("click",e.click_handler);var m=new se({props:{cls:e.arrangement.state+" "+e.arrangement.action,labels:e.l,items:e.champs,arrangement:e.arrangement.champs,disabled:e.champsDisabled,img:"champs"}});return m.$on("click",e.click_handler_1),{c(){t=p("header"),n=p("span"),r=f(g),o=h(),i=p("div"),d.$$.fragment.c(),s=h(),m.$$.fragment.c(),n.className="hints svelte-s9hvih",t.className="svelte-s9hvih",i.className="deck svelte-s9hvih"},m(e,u){c(e,t,u),a(t,n),a(n,r),c(e,o,u),c(e,i,u),$(d,i,null),a(i,s),$(m,i,null),l=!0},p(e,t){l&&!e.arrangement||g===(g=t._(t.arrangement.by+"-"+t.arrangement.action+"-"+t.arrangement.state))||v(r,g);var n={};e.arrangement&&(n.cls=t.arrangement.state+" "+t.arrangement.action),e.l&&(n.labels=t.l),e.maps&&(n.items=t.maps),e.arrangement&&(n.arrangement=t.arrangement.maps),e.mapsDisabled&&(n.disabled=t.mapsDisabled),d.$set(n);var o={};e.arrangement&&(o.cls=t.arrangement.state+" "+t.arrangement.action),e.l&&(o.labels=t.l),e.champs&&(o.items=t.champs),e.arrangement&&(o.arrangement=t.arrangement.champs),e.champsDisabled&&(o.disabled=t.champsDisabled),m.$set(o)},i(e){l||(d.$$.fragment.i(e),m.$$.fragment.i(e),l=!0)},o(e){d.$$.fragment.o(e),m.$$.fragment.o(e),l=!1},d(e){e&&(u(t),u(o),u(i)),d.$destroy(),m.$destroy()}}}function ge(t){var n,r,o,i=t.error||"Connecting...";return{c(){n=p("div"),r=p("h1"),o=f(i),n.className="deck-centered svelte-s9hvih"},m(e,t){c(e,n,t),a(n,r),a(r,o)},p(e,t){e.error&&i!==(i=t.error||"Connecting...")&&v(o,i)},i:e,o:e,d(e){e&&u(n)}}}function de(e){var t,n,r,o,i=[ge,he],s=[];function a(e){return e.error||!e.connected?0:1}return t=a(e),n=s[t]=i[t](e),{c(){n.c(),r=g()},m(e,n){s[t].m(e,n),c(e,r,n),o=!0},p(e,o){var c=t;(t=a(o))===c?s[t].p(e,o):(A(),M(()=>{s[c].d(1),s[c]=null}),n.o(1),O(),(n=s[t])||(n=s[t]=i[t](o)).c(),n.i(1),n.m(r.parentNode,r))},i(e){o||(n&&n.i(),o=!0)},o(e){n&&n.o(),o=!1},d(e){s[t].d(e),e&&u(r)}}}function ve(e,t){return e.filter(e=>(function(e,t){return e[t]&&e[t].action===ue.PICK})(t,e)).sort((e,n)=>(function(e,t,n){return(e[t]||{order:100}).order-(e[n]||{order:100}).order})(t,e,n))}function me(e,t,n){let{bo:r,sid:o,sender:i=localStorage.getItem("nick"),error:s=null}=t;const a={...ae,us:i};let c,u=()=>{},l={},p=!1,f=["us","them"],h=[],g=[];var d;function v(e){m(e,()=>K("messages",{sender:i,data:e,sid:r+o}))}function m(e,t=null){l.maps[e]||l.champs[e]||(t&&t(),n("arrangement",l=c.next(e).value||l),l.state===ce.CHAMPS&&n("maps",h=ve(h,l.maps)),l.state===ce.DONE&&n("champs",g=ve(g,l.champs)))}function b(e){!function(e){u(),n("unsubscribe",u=fe.subscribe(t=>{if(t){n("maps",h=t.maps),n("champs",g=t.champs);try{n("m",c=function*(e,t,n,r,o){if(2!==e.length)throw"2 player system only";if(-1==[3,5].indexOf(t))throw`don't know how to play best of ${t}`;const i={maps:{},champs:{},state:null,action:null,by:null};i.state=ce.TOSS;let s=o;i.state=ce.MAPS,i.action=ue.BAN,i.by=e[s%e.length];let a,c=1;do{a=yield i}while(l(a));i.action=p();do{a=yield i}while(f(a));return i.action=null,i.by=null,i;function u(){const e=Object.values(i.maps).filter(e=>e.action==ue.BAN).length>=n.length-t;return(c+1)%4<2||e?ue.PICK:ue.BAN}function l(e){return h(i.maps,t,u,n,e,"invalid map",ce.CHAMPS)}function p(){return(c-t+1)%3?ue.PICK:ue.BAN}function f(e){return h(i.champs,2*t,p,r,e,"invalid champ",ce.DONE)}function h(t,n,r,o,a,u,l){if(-1===o.indexOf(a))throw u;t[a]={action:r(c),by:e[s++%e.length],order:c++};const p=Object.values(t).filter(e=>e.action==ue.PICK).length>=n;return i.action=r(c),i.by=e[s%e.length],p&&(i.state=l),!p}}(f,r,h,g,e)),n("arrangement",l=c.next().value)}catch(e){n("error",s=e)}}}))}(e.toss==W({sender:i,sid:r+o})?0:1),n("connected",p=!0)}function y(e){e.sender!==i&&(m(e.data),a.them=e.sender,n("l",a))}let S,T;return d=function(){!function(e,t,n){K("negotiate",e).then(e=>e.json()).then(r=>{const o=(new B.HubConnectionBuilder).withUrl(r.url,{accessTokenFactory:()=>r.accessToken}).configureLogging(B.LogLevel.Information).build();return o.on("msg",n),o.on("join",t),o.onclose(()=>K("leave",e)),o.start()}).then(()=>K("join",e)).catch(console.error)}({sender:i,sid:r+o},b,y)},w().$$.on_mount.push(d),function(e){w().$$.on_destroy.push(e)}(u),e.$set=(e=>{"bo"in e&&n("bo",r=e.bo),"sid"in e&&n("sid",o=e.sid),"sender"in e&&n("sender",i=e.sender),"error"in e&&n("error",s=e.error)}),e.$$.update=((e={arrangement:1})=>{e.arrangement&&n("mapsDisabled",S=l.state!==ce.MAPS&&l.state!==ce.DONE||"them"==l.by),e.arrangement&&n("champsDisabled",T=l.state!==ce.CHAMPS&&l.state!==ce.DONE||"them"==l.by)}),{bo:r,sid:o,sender:i,error:s,l:a,arrangement:l,connected:p,maps:h,champs:g,onClick:v,_:function(e){return a[e]||e||""},mapsDisabled:S,champsDisabled:T,click_handler:function(e){return v(e.detail)},click_handler_1:function(e){return v(e.detail)}}}class be extends F{constructor(e){super(),N(this,e,me,de,s,["bo","sid","sender","error"])}}function ye(t){var n;return{c(){(n=p("div")).innerHTML="<h1>nope</h1>",n.className="deck-centered"},m(e,t){c(e,n,t)},p:e,i:e,o:e,d(e){e&&u(n)}}}function we(e){var n,r,o=[e.opts],i=e.cfg[e.screen].component;function s(e){let n={};for(var r=0;r<o.length;r+=1)n=t(n,o[r]);return{props:n}}if(i){var a=new i(s());a.$on("next",e.cfg[e.screen].next)}return{c(){a&&a.$$.fragment.c(),n=g()},m(e,t){a&&$(a,e,t),c(e,n,t),r=!0},p(e,t){var r=e.opts?function(e,t){const n={},r={},o={$$scope:1};let i=e.length;for(;i--;){const s=e[i],a=t[i];if(a){for(const e in s)e in a||(r[e]=1);for(const e in a)o[e]||(n[e]=a[e],o[e]=1);e[i]=a}else for(const e in s)o[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}(o,[t.opts]):{};if(i!==(i=t.cfg[t.screen].component)){if(a){A();const e=a;M(()=>{e.$destroy()}),e.$$.fragment.o(1),O()}i?((a=new i(s())).$on("next",t.cfg[t.screen].next),a.$$.fragment.c(),a.$$.fragment.i(1),$(a,n.parentNode,n)):a=null}else i&&a.$set(r)},i(e){r||(a&&a.$$.fragment.i(e),r=!0)},o(e){a&&a.$$.fragment.o(e),r=!1},d(e){e&&u(n),a&&a.$destroy(e)}}}function Se(e){var t,n,r,o,i,s=[we,ye],a=[];function l(e){return e.cfg[e.screen]?0:1}return t=l(e),n=a[t]=s[t](e),{c(){n.c(),r=g(),i=d(window,"hashchange",Te)},m(e,n){a[t].m(e,n),c(e,r,n),o=!0},p(e,o){var i=t;(t=l(o))===i?a[t].p(e,o):(A(),M(()=>{a[i].d(1),a[i]=null}),n.o(1),O(),(n=a[t])||(n=a[t]=s[t](o)).c(),n.i(1),n.m(r.parentNode,r))},i(e){o||(n&&n.i(),o=!0)},o(e){n&&n.o(),o=!1},d(e){a[t].d(e),e&&u(r),i()}}}function Te(){return window.location.reload()}function ke(e,t,n){const r={SETUP:"setup",SHUFFLE:"shuffle"},o={[r.SETUP]:{component:ee,next:e=>c(e.detail,r.SHUFFLE)},[r.SHUFFLE]:{component:be,next:e=>c(e.detail)}};let i,s=localStorage.getItem("nick"),a=(n("opts",i=function(){const e=window.location.hash.substr(1).split("-");return 2!==e.length?null:{bo:+e[0],sid:e[1]}}()),i&&s?r.SHUFFLE:r.SETUP);function c(e,t){n("opts",i=e),n("screen",a=t)}return{cfg:o,opts:i,screen:a}}return new class extends F{constructor(e){super(),N(this,e,ke,Se,s,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
